<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
    <title>Testing Pelican Migration - Theory And Practice</title>
    <!-- Using the latest rendering mode for IE -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- for ipython notebook -->


    <!-- Open Graph tags -->
        <meta property="og:site_name" content="Theory And Practice" />
            <meta property="og:type" content="article"/>
            <meta property="og:title" content="Testing Pelican Migration"/>
            <meta property="og:url" content="http://cranmer.github.io/Testing-Pelican-Migration.html"/>
            <meta property="og:description" content="So, I&#39;m taking the leap and migrating from Wordpress to pelican. Testing: Here is a link to a local file liquid {% img %} tag working {% youtube %} tag working, but does it work with start/end time? does it support change to height/width of iframe? render_math works: $e^{i\pi}+1 = 0$ ... if (!document.getElementById(&#39;mathjaxscript_pelican_#%@#$@#&#39;)) { var mathjaxscript = document.createElement(&#39;script&#39;); mathjaxscript.id = &#39;mathjaxscript_pelican_#%@#$@#&#39;; mathjaxscript.type = &#39;text/javascript&#39;; mathjaxscript.src = &#39;https:&#39; == document.location.protocol ? &#39;https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&#39; : &#39;http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML&#39;; mathjaxscript[(window.opera ? &#34;innerHTML&#34; : &#34;text&#34;)] = &#34;MathJax.Hub.Config({&#34; + &#34; config: [&#39;MMLorHTML.js&#39;],&#34; + &#34; TeX: { extensions: [&#39;AMSmath.js&#39;,&#39;AMSsymbols.js&#39;,&#39;noErrors.js&#39;,&#39;noUndefined.js&#39;], equationNumbers: { autoNumber: &#39;AMS&#39; } },&#34; + &#34; jax: [&#39;input/TeX&#39;,&#39;input/MathML&#39;,&#39;output/HTML-CSS&#39;],&#34; + &#34; extensions: [&#39;tex2jax.js&#39;,&#39;mml2jax.js&#39;,&#39;MathMenu.js&#39;,&#39;MathZoom.js&#39;],&#34; + &#34; displayAlign: &#39;center&#39;,&#34; + &#34; displayIndent: &#39;0em&#39;,&#34; + &#34; showMathMenu: true,&#34; + &#34; tex2jax: { &#34; + &#34; inlineMath: [ [&#39;$&#39;,&#39;$&#39;] ], &#34; + &#34; displayMath: [ [&#39;$$&#39;,&#39;$$&#39;] ],&#34; + &#34; processEscapes: true,&#34; + &#34; preview: &#39;TeX&#39;,&#34; + &#34; }, &#34; + &#34; &#39;HTML-CSS&#39;: { &#34; + &#34; styles: { &#39;.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn&#39;: {color: &#39;black ! important&#39;} }&#34; + &#34; } &#34; + &#34;}); &#34;; (document.body || document.getElementsByTagName(&#39;head&#39;)[0]).appendChild(mathjaxscript); }"/>
            <meta property="article:published_time" content="2014-03-21" />
            <meta property="article:section" content="Blog" />

    <!-- Bootstrap -->
        <link rel="stylesheet" href="http://cranmer.github.io/theme/css/bootstrap.min.css" type="text/css"/>
    <link href="http://cranmer.github.io/theme/css/font-awesome.min.css" rel="stylesheet">

    <link href="http://cranmer.github.io/theme/css/pygments/default.css" rel="stylesheet">
    <link rel="stylesheet" href="http://cranmer.github.io/theme/css/style.css" type="text/css"/>

        <link href="http://cranmer.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate"
              title="Theory And Practice ATOM Feed"/>


</head>
<body>

<div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="http://cranmer.github.io/" class="navbar-brand">
Theory And Practice            </a>
        </div>
        <div class="collapse navbar-collapse navbar-ex1-collapse">
            <ul class="nav navbar-nav">
                         <li><a href="http://cranmer.github.io/">
                             Home
                          </a></li>
                         <li><a href="http://cranmer.github.io/pages/impactstory.html">
                             ImpactStory
                          </a></li>
                         <li><a href="http://cranmer.github.io/pages/in-the-news.html">
                             Media & Outreach
                          </a></li>
                         <li><a href="http://cranmer.github.io/pages/projects.html">
                             Projects
                          </a></li>
                        <li class="active">
                            <a href="http://cranmer.github.io/category/blog.html">Blog</a>
                        </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li><a href="http://cranmer.github.io/archives.html"><i class="fa fa-th-list"></i><span class="icon-label">Archives</span></a></li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
</div> <!-- /.navbar -->

<div class="container">
    <div class="row">
        <div class="col-sm-9">

    <section id="content">
        <article>
            <header class="page-header">
                <h1>
                    <a href="http://cranmer.github.io/Testing-Pelican-Migration.html"
                       rel="bookmark"
                       title="Permalink to Testing Pelican Migration">
                        Testing Pelican Migration
                    </a>
                </h1>
            </header>
            <div class="entry-content">
                <div class="panel">
                    <div class="panel-body">
<footer class="post-info">
    <span class="label label-default">Date</span>
    <span class="published">
        <i class="fa fa-calendar"></i><time datetime="2014-03-21T10:53:00"> Fri 21 March 2014</time>
    </span>



    
</footer><!-- /.post-info -->                    </div>
                </div>
                <p>So, I'm taking the leap and migrating from Wordpress to pelican.</p>
<p>Testing:</p>
<ul>
<li>Here is <a href="{filename}../inspired-by-the-higgs-a-step-forward-in-open-access.md">a link</a> to a local file</li>
<li>liquid {% img %} tag working    </li>
<li>{% youtube %} tag working, but<ul>
<li>does it work with start/end time?</li>
<li>does it support change to height/width of iframe?</li>
</ul>
</li>
<li>render_math works: $e^{i\pi}+1 = 0$</li>
<li>simple inline <code>code</code> markup</li>
<li>a little block of python with pygments</li>
</ul>
<div class="highlight"><pre>    <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
        <span class="k">print</span> <span class="s">&#39;welcome to Pelican&#39;</span>
</pre></div>


<p>Notes on getting notebook to work</p>
<ul>
<li>ipython command line worked, but import IPython wasn't working. Was a virtualenv issue, did a pip install (very fast) and all good now. </li>
<li>Adding the EXTRA_HEADER doesn't work until the _nb_header.html is generated. If there is no check for the file, the devserver has problems. </li>
<li>I wasn't sure where to put the {% if EXTRA_HEADER %} code, but found that it should go in themes/base.html. Unfortunately, the _nb_header isn't playing well with the pelican-bootstrap3 theme... the notebook is styled, but the menu, buttons, and headers of the rest of the page are modified.</li>
</ul>
<p>{% notebook Spirograph3d.ipynb cells[1:9] %}</p>
<hr />
<p>
<div class="text_cell_render border-box-sizing rendered_html">
<p><em>This notebook is inspired by the</em> <a href="http://jakevdp.github.io/blog/2013/05/12/embedding-matplotlib-animations/"><em>blog post</em></a> <em>on</em> <a href="http://jakevdp.github.io"><em>Pythonic Perambulations</em></a>.</p>
<p><em>License:</em> <a href="http://opensource.org/licenses/BSD-3-Clause"><em>BSD</em></a> <em>(C) 2014, Kyle Cranmer.</em> <em>Feel free to use, distribute, and modify with the above attribution.</em></p>
</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>When teaching Physics I at NYU I gave a challenging problem to my students to use change of coordinates with rotations and translations to derive the parametric equation for a spirograph. They also had to solve for the velocity and acceleration. It was hard, but a lot of students liked it. In the process, I made some <a href="http://www.flickr.com/photos/hoonynoo/2159185452/in/photostream/">pretty plots</a> and posted them to Flickr. When I saw Jake's awesome animation examples, I had to try it out with something novel.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[1]:
</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="o">%</span><span class="k">pylab</span> <span class="n">inline</span>
</pre></div>

</div>
</div>

<div class="vbox output_wrapper">
<div class="output vbox">


<div class="hbox output_area"><div class="prompt"></div>
<div class="box-flex1 output_subarea output_stream output_stdout">
<pre>
Populating the interactive namespace from numpy and matplotlib

</pre>
</div>
</div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now we'll create a function that will save an animation and embed it in an html string. Note that this will require ffmpeg or mencoder to be installed on your system. For reasons entirely beyond my limited understanding of video encoding details, this also requires using the libx264 encoding for the resulting mp4 to be properly embedded into HTML5.</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[2]:
</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">from</span> <span class="nn">tempfile</span> <span class="kn">import</span> <span class="n">NamedTemporaryFile</span>

<span class="n">VIDEO_TAG</span> <span class="o">=</span> <span class="s">&quot;&quot;&quot;&lt;video controls&gt;</span>
<span class="s"> &lt;source src=&quot;data:video/x-m4v;base64,{0}&quot; type=&quot;video/mp4&quot;&gt;</span>
<span class="s"> Your browser does not support the video tag.</span>
<span class="s">&lt;/video&gt;&quot;&quot;&quot;</span>

<span class="k">def</span> <span class="nf">anim_to_html</span><span class="p">(</span><span class="n">anim</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">anim</span><span class="p">,</span> <span class="s">&#39;_encoded_video&#39;</span><span class="p">):</span>
        <span class="k">with</span> <span class="n">NamedTemporaryFile</span><span class="p">(</span><span class="n">suffix</span><span class="o">=</span><span class="s">&#39;.mp4&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">anim</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="n">fps</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">70</span><span class="p">,</span><span class="n">extra_args</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;-vcodec&#39;</span><span class="p">,</span> <span class="s">&#39;libx264&#39;</span><span class="p">,</span> <span class="s">&#39;-pix_fmt&#39;</span><span class="p">,</span> <span class="s">&#39;yuv420p&#39;</span><span class="p">])</span>
            <span class="n">video</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s">&quot;rb&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
        <span class="n">anim</span><span class="o">.</span><span class="n">_encoded_video</span> <span class="o">=</span> <span class="n">video</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&quot;base64&quot;</span><span class="p">)</span>
    
    <span class="k">return</span> <span class="n">VIDEO_TAG</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">anim</span><span class="o">.</span><span class="n">_encoded_video</span><span class="p">)</span>
</pre></div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>With this HTML function in place, we can use IPython's HTML display tools to create a function which will show the video inline:</p>
</div>
<div class="cell border-box-sizing code_cell vbox">
<div class="input hbox">
<div class="prompt input_prompt">
In&nbsp;[3]:
</div>
<div class="input_area box-flex1">
<div class="highlight-ipynb"><pre class="ipynb"><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>

<span class="k">def</span> <span class="nf">display_animation</span><span class="p">(</span><span class="n">anim</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">close</span><span class="p">(</span><span class="n">anim</span><span class="o">.</span><span class="n">_fig</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">HTML</span><span class="p">(</span><span class="n">anim_to_html</span><span class="p">(</span><span class="n">anim</span><span class="p">))</span>
</pre></div>

</div>
</div>

</div>
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now define a class for the spirograph.</p>
</div></p>
<p>How do I style the literal line below?</p>
<p>{% include_code learnEmbedding.py lang:python learnEmbedding %}</p>
<!--

test notebook

--><script type= "text/javascript">
    if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
        var mathjaxscript = document.createElement('script');
        mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
        mathjaxscript.type = 'text/javascript';
        mathjaxscript.src = 'https:' == document.location.protocol
                ? 'https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'
                : 'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';
        mathjaxscript[(window.opera ? "innerHTML" : "text")] =
            "MathJax.Hub.Config({" +
            "    config: ['MMLorHTML.js']," +
            "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
            "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
            "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
            "    displayAlign: 'center'," +
            "    displayIndent: '0em'," +
            "    showMathMenu: true," +
            "    tex2jax: { " +
            "        inlineMath: [ ['$','$'] ], " +
            "        displayMath: [ ['$$','$$'] ]," +
            "        processEscapes: true," +
            "        preview: 'TeX'," +
            "    }, " +
            "    'HTML-CSS': { " +
            "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'black ! important'} }" +
            "    } " +
            "}); ";
        (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
    }
</script>

            </div>
            <!-- /.entry-content -->
        </article>
    </section>

        </div>
        <div class="col-sm-3 well well-sm" id="sidebar">

<aside>
    <section>
        <ul class="list-group list-group-flush">
                <li class="list-group-item"><h4><i class="fa fa-home fa-lg"></i><span class="icon-label">Social</span></h4>
                  <ul class="list-group" id="social">
                    <li class="list-group-item"><a href="http://twitter.com/kylecranmer"><i
                            class="fa fa-twitter-square fa-lg"></i> twitter
                    </a></li>
                    <li class="list-group-item"><a href="http://github.com/cranmer"><i
                            class="fa fa-github-square fa-lg"></i> github
                    </a></li>
                    <li class="list-group-item"><a href="http://www.linkedin.com/in/kylecranmer"><i
                            class="fa fa-linkedin-square fa-lg"></i> linkedin
                    </a></li>
                    <li class="list-group-item"><a href="https://plus.google.com/106689822196584540592/posts"><i
                            class="fa fa-google-plus-square fa-lg"></i> google+
                    </a></li>
                    <li class="list-group-item"><a href="http://www.flickr.com/photos/hoonynoo/"><i
                            class="fa fa-flickr-square fa-lg"></i> flickr
                    </a></li>
                  </ul>
                </li>



                <li class="list-group-item"><a href="http://cranmer.github.io/"><h4><i class="fa fa-tags fa-lg"></i><span class="icon-label">Tags</span></h4></a>
                    <ul class="list-group " id="tags">
                        <li class="list-group-item tag-1">
                            <a href="http://cranmer.github.io/tag/statistics.html">
                                Statistics
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://cranmer.github.io/tag/data.html">
                                Data
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://cranmer.github.io/tag/open-science.html">
                                open science
                            </a>
                        </li>
                        <li class="list-group-item tag-1">
                            <a href="http://cranmer.github.io/tag/physics.html">
                                physics
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://cranmer.github.io/tag/python.html">
                                python
                            </a>
                        </li>
                        <li class="list-group-item tag-2">
                            <a href="http://cranmer.github.io/tag/higgs.html">
                                Higgs
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://cranmer.github.io/tag/science-society.html">
                                Science &amp; Society
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://cranmer.github.io/tag/communication.html">
                                Communication
                            </a>
                        </li>
                        <li class="list-group-item tag-4">
                            <a href="http://cranmer.github.io/tag/publishing.html">
                                Publishing
                            </a>
                        </li>
                    </ul>
                </li>    
    <li class="list-group-item"><h4><i class="fa fa-external-link-square fa-lg"></i><span class="icon-label">Links</span></h4>
      <ul class="list-group" id="links">
        <li class="list-group-item">
            <a href="http://getpelican.com/" target="_blank">
                Pelican
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://python.org/" target="_blank">
                Python.org
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://jinja.pocoo.org/" target="_blank">
                Jinja2
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.quantumdiaries.org/" target="_blank">
                Quantum Diaries
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.quantumdiaries.org/author/kyle-cranmer/" target="_blank">
                Me @ Quantum Diaries
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.math.columbia.edu/~woit/wordpress/" target="_blank">
                Not Even Wrong
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://twistedphysics.typepad.com/cocktail_party_physics/" target="_blank">
                Cocktail Party Physics
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://resonaances.blogspot.com/" target="_blank">
                Résonaances
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://profmattstrassler.com/" target="_blank">
                Matt Strassler
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://gordonwatts.wordpress.com/" target="_blank">
                Life as a physicist
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.science20.com/physics" target="_blank">
                Tommaso Dorigo
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://blogs.discovermagazine.com/cosmicvariance/" target="_blank">
                Cosmic Variance
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://muon.wordpress.com/" target="_blank">
                Collider Blog
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://www.symmetrymagazine.org/breaking" target="_blank">
                Symmetry Breaking
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://blog.inspirehep.net/" target="_blank">
                INSPIRE
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://datapub.cdlib.org/" target="_blank">
                Data Pub
            </a>
        </li>
        <li class="list-group-item">
            <a href="http://hoggresearch.blogspot.com/" target="_blank">
                Hogg’s Research
            </a>
        </li>
      </ul>
    </li>

        </ul>
    </section>

</aside>        </div>
    </div>
</div>
<footer>
   <div class="container">
      <hr>
      <div class="row">
         <div class="col-xs-10">&copy; 2014 Kyle Cranmer
            &middot; Powered by <a href="https://github.com/DandyDev/pelican-bootstrap3" target="_blank">pelican-bootstrap3</a>,
            <a href="http://docs.getpelican.com/" target="_blank">Pelican</a>,
            <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>              <p><small>  <a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by/4.0/80x15.png" /></a>
    Content
  licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>, except where indicated otherwise.
</small></p>
         </div>
         <div class="col-xs-2"><p class="pull-right"><i class="fa fa-arrow-up"></i> <a href="#">Back to top</a></p></div>
      </div>
   </div>
</footer>
<script src="http://code.jquery.com/jquery.js"></script>

<!-- Include all compiled plugins (below), or include individual files as needed -->
<script src="http://cranmer.github.io/theme/js/bootstrap.min.js"></script>

<!-- Enable responsive features in IE8 with Respond.js (https://github.com/scottjehl/Respond) -->
<script src="http://cranmer.github.io/theme/js/respond.min.js"></script>

</body>
</html>